# 전체 시스템 아키텍처 설계

## 1. 개요

이 문서는 `skyautonet_birdro` 로봇 시스템의 **전체적인 아키텍처**를 설명합니다. ROS2를 기반으로 하는 각 주요 컴포넌트(패키지 또는 노드)의 역할, 상호작용, 데이터 흐름을 명확히 정의합니다.

## 2. 주요 컴포넌트

`skyautonet_birdro` 시스템은 크게 다음과 같은 핵심 컴포넌트들로 구성됩니다.

* **`skyautonet_drivers`**: 하드웨어 인터페이스
    * 카메라, GPIO, 구동계, 스피커 등 물리 장치와 통신
* **`skyautonet_perception`**: 환경 및 조류 인지
    * 새 검출, 새 추적, 일반 객체 검출, 센서 데이터 전처리
* **`skyautonet_autonomy`**: 자율주행 스택
    * 현지화, 경로 계획, 로봇 제어, 차량 인터페이스
* **`skyautonet_deterrence`**: 조류 퇴치 로직 및 제어
    * 퇴치 관리, 레이저/램프 제어, 스피커 제어
* **`skyautonet_managers`**: 시스템 상위 관리 및 미션 제어
    * 미션 관리, 시스템 상태 모니터링
* **`skyautonet_msgs`**: 사용자 정의 메시지 정의
* **`skyautonet_launch`**: 시스템 시작 및 설정

## 3. 시스템 데이터 흐름 (High-Level)

1.  **센서 데이터 입력**: 카메라 및 기타 센서 데이터가 `skyautonet_drivers`를 통해 시스템으로 유입됩니다.
2.  **인지 및 환경 이해**: `skyautonet_perception`이 센서 데이터를 처리하여 새의 위치, 종류, 움직임 및 주변 환경의 장애물을 인식합니다.
3.  **자율주행 의사결정**: `skyautonet_autonomy`가 인지된 환경 정보와 현재 위치를 기반으로 로봇의 자율적인 이동 경로를 계획하고 제어합니다.
4.  **조류 퇴치 의사결정**: `skyautonet_deterrence`가 인지된 새 정보를 기반으로 적절한 퇴치 모드 및 전략을 결정하고, `skyautonet_drivers`를 통해 레이저, 램프, 스피커 등의 퇴치 장치를 제어합니다.
5.  **종합 미션 관리**: `skyautonet_managers`가 자율주행 미션과 조류 퇴치 미션 간의 우선순위를 조정하고, 로봇의 전반적인 상태를 모니터링합니다.

## 4. 아키텍처 다이어그램 (추후 추가)

*(이 섹션에는 시스템의 주요 컴포넌트와 그들 간의 ROS2 토픽, 서비스, 액션 통신을 시각적으로 보여주는 다이어그램을 삽입할 예정입니다.)*

## 5. 설계 원칙

* **모듈성**: 각 기능별로 독립적인 ROS2 패키지로 분리하여 개발 및 유지보수를 용이하게 합니다.
* **확장성**: 새로운 센서, 퇴치 장치 또는 자율주행 기능 추가 시 기존 시스템에 미치는 영향을 최소화합니다.
* **견고성**: 예외 상황 처리 및 오류 복구 메커니즘을 고려하여 안정적인 동작을 보장합니다.
* **성능**: Jetson Orin 및 RK3588과 같은 임베디드 플랫폼에서 실시간 처리가 가능하도록 최적화된 설계를 지향합니다.